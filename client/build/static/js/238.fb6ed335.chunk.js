"use strict";(self.webpackChunkcrown_store=self.webpackChunkcrown_store||[]).push([[238],{5238:(e,s,l)=>{l.r(s),l.d(s,{default:()=>h});var a=l(2791),r=l(1134),o=l(5027),t=l(5038),n=l(4420),i=l(7689),c=l(1087),d=l(7391),u=l(4032),m=l(5294),p=l(184);const h=e=>{let{}=e;const s=(0,o.T)(),l=(0,n.v9)(t.Jt),{userImgUrl:h}=(0,n.v9)((e=>e.authSlice)),b=a.useRef(null),{register:f,handleSubmit:j,formState:{errors:x}}=(0,r.cI)();if(l)return(0,p.jsx)(i.Fg,{to:"/"});return(0,p.jsx)("div",{className:"form-block-wrapper",children:(0,p.jsxs)("div",{className:"form-block",children:[(0,p.jsx)("h3",{className:"form-block__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,p.jsxs)("form",{onSubmit:j((async e=>{const l=await s((0,t.U1)({...e,url:h}));if(!l.payload)return alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f!");l.payload.token&&window.localStorage.setItem("token",l.payload.token)})),children:[(0,p.jsxs)("div",{className:"form-block__inputs",children:[(0,p.jsx)(d.Z,{error:x.password&&!0,id:"outlined-basic",className:"form-block__input",label:"\u0418\u043c\u044f",variant:"outlined",...f("name",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f"})}),x.name&&(0,p.jsx)("p",{style:{color:"red"},children:x.name.message}),(0,p.jsx)(d.Z,{error:x.password&&!0,id:"outlined-basic",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:"form-block__input",variant:"outlined",...f("fname",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e"})}),x.fname&&(0,p.jsx)("p",{style:{color:"red"},children:x.fname.message}),(0,p.jsx)(d.Z,{error:x.password&&!0,id:"outlined-basic",label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:"form-block__input",variant:"outlined",...f("oname",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"})}),x.oname&&(0,p.jsx)("p",{style:{color:"red"},children:x.oname.message}),(0,p.jsx)(d.Z,{error:x.password&&!0,id:"outlined-basic",label:"Email",className:"form-block__input",variant:"outlined",...f("email",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"})}),x.email&&(0,p.jsx)("p",{style:{color:"red"},children:x.email.message}),(0,p.jsx)(d.Z,{error:x.password&&!0,id:"outlined-basic",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",className:"form-block__input",variant:"outlined",...f("phone",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"})}),x.phone&&(0,p.jsx)("p",{style:{color:"red"},children:x.phone.message}),(0,p.jsx)(d.Z,{error:x.password&&!0,id:"outlined-basic",label:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"form-block__input",variant:"outlined",type:"password",...f("password",{required:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),x.password&&(0,p.jsx)("p",{style:{color:"red"},children:x.password.message}),!h&&(0,p.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e"}),(0,p.jsx)("input",{id:"file-upload",ref:b,type:"file",style:{display:"none"},onChange:async e=>{try{const l=new FormData;l.append("image",e.target.files[0]),u.Z.post("http://localhost:8080/upload/user",l).then((e=>{let{data:l}=e;s((0,t.mf)("".concat(l.url)))}))}catch(l){console.warn(l)}}}),h&&(0,p.jsx)("button",{className:"settings__btn-delete",onClick:()=>{try{m.Z.delete("http://localhost:8080/upload/auth/delete/".concat(h)),b.current&&(b.current.value=""),s((0,t.mf)(""))}catch(e){console.log(e)}},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,p.jsx)("img",{className:"form-block__img-upload",src:"http://localhost:8080/uploads/userIcons/".concat(h),alt:""})]}),(0,p.jsxs)("div",{className:"form-block__btns",children:[(0,p.jsx)("button",{type:"submit",className:"button button--footer",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,p.jsxs)("p",{children:["\u0415\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",(0,p.jsxs)(c.rU,{to:"/auth/login",className:"button-link-reg",children:[" ","\u0412\u043e\u0439\u0442\u0438"]})]})]})]})]})})}}}]);
//# sourceMappingURL=238.fb6ed335.chunk.js.map